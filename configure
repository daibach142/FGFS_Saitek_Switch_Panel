#!/bin/bash
#
# Hand produced (not Autotools!)
#
outFile="StartSwitchPanel"
prog="/usr/games/SaitekSwitchPanel"
defaultIP="127.0.0.1"
cd Generators
ls *.xml
cd ..
read -p "Select Aircraft configuration from above (omit the .xml extension): " aircraft
echo "export AIRCRAFT=$aircraft" >Configparams
read -p "Do you have 'libudev1' installed (Y/n): " libudev
shopt -s nocasematch
if [[ -z $libudev || $libudev = 'y' ]]
then
	echo "export LIBUDEV=1" >>Configparams
	Options=""
else
	read -p "Switch Panel Device address: " udevdevice
	Options="--switch $udevdevice "
fi
read -p "Flightgear computer (default is $defaultIP): " ipaddr
if [ -z $ipaddr ]   
then
	ipaddr=$defaultIP
fi
Options="$Options --flightgear $ipaddr"
echo "arguments are: $Options"
cat <<EOF >$outFile
#!/bin/bash
#
# Startup file for Switch Panel driver
#	generated by ./configure
#
#while :
#do
	$prog $Options &
#	sleep 1;
#done
EOF
chmod +x $outFile
echo "$outFile created"
